{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport BackTop from './BackTop.vue';\nexport default {\n  components: {\n    BackTop\n  },\n\n  data() {\n    return {\n      videos: [],\n      backtop_show: false,\n      isLoading: false,\n      lock: true\n    };\n  },\n\n  methods: {\n    getFirstVideos() {\n      this.isLoading = true;\n      fetch(\"https://kotokawa-akira-mywife.site/web/api/video/getVideos/10/?first=true\", {\n        method: 'get',\n        credentials: 'include'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.videos = data;\n        this.isLoading = false;\n      });\n    },\n\n    getVideos() {\n      this.lock = false;\n      this.$refs.loadmore.innerText = \"正在加载···\";\n      this.isLoading = true;\n      fetch(\"https://kotokawa-akira-mywife.site/web/api/video/getVideos/10/?first=false\", {\n        method: 'get',\n        credentials: 'include'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.isLoading = false;\n\n        if (data.length != 0) {\n          this.$refs.loadmore.innerText = \"\";\n          data.forEach(element => {\n            this.videos.push(element);\n          });\n          this.lock = true;\n        } else {\n          this.isLoading = true;\n          this.$refs.loadmore.innerText = \"没有更多数据了···\";\n          this.lock = false;\n        }\n      });\n    },\n\n    scrollListener() {\n      window.addEventListener(\"scroll\", () => {\n        if (document.documentElement.scrollTop > 64) this.backtop_show = true;else this.backtop_show = false;\n\n        if (document.documentElement.scrollTop > document.body.offsetHeight - window.innerHeight - 30) {\n          if (this.lock) this.getVideos();\n        }\n      });\n    }\n\n  },\n\n  created() {\n    this.getFirstVideos();\n  },\n\n  mounted() {\n    this.scrollListener();\n    this.$refs.load.addEventListener(\"mousedown\", () => {\n      this.$refs.load.classList.add(\"btn-hold\");\n    });\n    document.addEventListener(\"mouseup\", () => {\n      this.$refs.load.classList.remove(\"btn-hold\");\n    });\n  }\n\n};","map":{"version":3,"mappings":";AA8DA,OAAOA,OAAP,MAAoB,eAApB;AACA,eAAe;EACXC,UAAU,EAAE;IACRD;EADQ,CADD;;EAIXE,IAAI,GAAG;IACH,OAAO;MACHC,MAAM,EAAE,EADL;MAEHC,YAAY,EAAE,KAFX;MAGHC,SAAS,EAAE,KAHR;MAIHC,IAAI,EAAE;IAJH,CAAP;EAMH,CAXU;;EAYXC,OAAO,EAAE;IACLC,cAAc,GAAG;MACb,KAAKH,SAAL,GAAiB,IAAjB;MACAI,KAAK,CAAC,2EAAD,EAA8E;QAC/EC,MAAM,EAAE,KADuE;QAE/EC,WAAW,EAAE;MAFkE,CAA9E,CAAL,CAGGC,IAHH,CAGQC,GAAE,IAAK;QACX,OAAOA,GAAG,CAACC,IAAJ,EAAP;MACH,CALD,EAKGF,IALH,CAKQV,IAAG,IAAK;QACZ,KAAKC,MAAL,GAAcD,IAAd;QACA,KAAKG,SAAL,GAAiB,KAAjB;MACH,CARD;IASH,CAZI;;IAaLU,SAAS,GAAG;MACR,KAAKT,IAAL,GAAY,KAAZ;MACA,KAAKU,KAAL,CAAWC,QAAX,CAAoBC,SAApB,GAAgC,SAAhC;MACA,KAAKb,SAAL,GAAiB,IAAjB;MACAI,KAAK,CAAC,4EAAD,EAA+E;QAChFC,MAAM,EAAE,KADwE;QAEhFC,WAAW,EAAE;MAFmE,CAA/E,CAAL,CAGGC,IAHH,CAGQC,GAAE,IAAK;QACX,OAAOA,GAAG,CAACC,IAAJ,EAAP;MACH,CALD,EAKGF,IALH,CAKQV,IAAG,IAAK;QACZ,KAAKG,SAAL,GAAiB,KAAjB;;QACA,IAAIH,IAAI,CAACiB,MAAL,IAAe,CAAnB,EAAsB;UAClB,KAAKH,KAAL,CAAWC,QAAX,CAAoBC,SAApB,GAAgC,EAAhC;UACAhB,IAAI,CAACkB,OAAL,CAAaC,OAAM,IAAK;YACpB,KAAKlB,MAAL,CAAYmB,IAAZ,CAAiBD,OAAjB;UACH,CAFD;UAGA,KAAKf,IAAL,GAAY,IAAZ;QACJ,CANA,MAOK;UACD,KAAKD,SAAL,GAAiB,IAAjB;UACA,KAAKW,KAAL,CAAWC,QAAX,CAAoBC,SAApB,GAAgC,YAAhC;UACA,KAAKZ,IAAL,GAAY,KAAZ;QACJ;MACH,CAnBD;IAoBH,CArCI;;IAsCLiB,cAAc,GAAG;MACbC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,MAAM;QACpC,IAAIC,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,GAAqC,EAAzC,EACI,KAAKxB,YAAL,GAAoB,IAApB,CADJ,KAGI,KAAKA,YAAL,GAAoB,KAApB;;QACJ,IAAIsB,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,GAAqCF,QAAQ,CAACG,IAAT,CAAcC,YAAd,GAA6BN,MAAM,CAACO,WAApC,GAAkD,EAA3F,EAA+F;UAC3F,IAAI,KAAKzB,IAAT,EACI,KAAKS,SAAL;QACR;MACH,CATD;IAUJ;;EAjDK,CAZE;;EA+DXiB,OAAO,GAAG;IACN,KAAKxB,cAAL;EACH,CAjEU;;EAkEXyB,OAAO,GAAG;IACN,KAAKV,cAAL;IACA,KAAKP,KAAL,CAAWkB,IAAX,CAAgBT,gBAAhB,CAAiC,WAAjC,EAA8C,MAAM;MAChD,KAAKT,KAAL,CAAWkB,IAAX,CAAgBC,SAAhB,CAA0BC,GAA1B,CAA8B,UAA9B;IACH,CAFD;IAGAV,QAAQ,CAACD,gBAAT,CAA0B,SAA1B,EAAqC,MAAM;MACvC,KAAKT,KAAL,CAAWkB,IAAX,CAAgBC,SAAhB,CAA0BE,MAA1B,CAAiC,UAAjC;IACH,CAFD;EAGJ;;AA1EW,CAAf","names":["BackTop","components","data","videos","backtop_show","isLoading","lock","methods","getFirstVideos","fetch","method","credentials","then","res","json","getVideos","$refs","loadmore","innerText","length","forEach","element","push","scrollListener","window","addEventListener","document","documentElement","scrollTop","body","offsetHeight","innerHeight","created","mounted","load","classList","add","remove"],"sourceRoot":"","sources":["D:\\VideoStation-main\\home\\src\\components\\MainView.vue"],"sourcesContent":["<template>\n    <main class=\"main-view\">\n        <section>\n            <ul>\n                <li v-for=\"(item, index) in videos\" :key=\"index\">\n                    <div class=\"border-container\">\n                        <div class=\"img-container\">\n                            <a :href=\"'https://kotokawa-akira-mywife.site/web/Video/' + item.id\" target=\"_blank\">\n                                <img :src=\"'https://kotokawa-akira-mywife.site/web/image?filePath=%2Fopt%2FServer%2FvideoStation%2FvideoImg%2F' + item.id\"\n                                    alt=\"\" loading=\"lazy\">\n                            </a>\n                        </div>\n                        <a :href=\"'https://kotokawa-akira-mywife.site/web/Video/' + item.id\" target=\"_blank\">\n                            <div class=\"main-recommend-li-title\" :title=\"item.title\">\n                                {{ item.title }}\n                            </div>\n                        </a>\n                        <div class=\"main-recommend-li-detail-container\">\n                            <div class=\"main-recommend-li-detail\" :title=\"item.upName\">\n                                <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + item.up\" target=\"_blank\">\n                                    <div class=\"upName_span\">\n                                        {{ item.upName }}\n                                    </div>\n                                </a>\n                            </div>\n                            <div style=\"width:47%\" class=\"main-recommend-li-detail \">\n                                <div class=\"main-recommend-li-detail-play\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\">\n                                        <path\n                                            d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3 17v-10l9 5.146-9 4.854z\" />\n                                    </svg>\n\n                                    <span>\n                                        {{ item.play }}\n                                    </span>\n                                </div>\n                                <div class=\"main-recommend-li-detail-play\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\">\n                                        <path\n                                            d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm1 12v-6h-2v8h7v-2h-5z\" />\n                                    </svg>\n                                    <span>{{ item.time.slice(0, 10) }}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </li>\n            </ul>\n            <div class=\"loadmore\" v-show=\"isLoading\" ref=\"loadmore\">正在加载···</div>\n        </section>\n        <transition name=\"backtopShow\" appear>\n            <div class=\"aside\" v-show=\"backtop_show\">\n                <BackTop height=\"50\" width=\"50\"></BackTop>\n            </div>\n        </transition>\n    </main>\n    <div class=\"load-more\" ref=\"load\" @click=\"getVideos\">\n        <b>加载更多</b>\n    </div>\n</template>\n<script>\nimport BackTop from './BackTop.vue'\nexport default {\n    components: {\n        BackTop\n    },\n    data() {\n        return {\n            videos: [],\n            backtop_show: false,\n            isLoading: false,\n            lock: true\n        }\n    },\n    methods: {\n        getFirstVideos() {\n            this.isLoading = true;\n            fetch(\"https://kotokawa-akira-mywife.site/web/api/video/getVideos/10/?first=true\", {\n                method: 'get',\n                credentials: 'include'\n            }).then(res => {\n                return res.json();\n            }).then(data => {\n                this.videos = data;\n                this.isLoading = false;\n            });\n        },\n        getVideos() {\n            this.lock = false;\n            this.$refs.loadmore.innerText = \"正在加载···\";\n            this.isLoading = true;\n            fetch(\"https://kotokawa-akira-mywife.site/web/api/video/getVideos/10/?first=false\", {\n                method: 'get',\n                credentials: 'include'\n            }).then(res => {\n                return res.json();\n            }).then(data => {\n                this.isLoading = false;\n                if (data.length != 0) {\n                    this.$refs.loadmore.innerText = \"\";\n                    data.forEach(element => {\n                        this.videos.push(element);\n                    });\n                    this.lock = true;\n                }\n                else {\n                    this.isLoading = true;\n                    this.$refs.loadmore.innerText = \"没有更多数据了···\";\n                    this.lock = false;\n                }\n            });\n        },\n        scrollListener() {\n            window.addEventListener(\"scroll\", () => {\n                if (document.documentElement.scrollTop > 64)\n                    this.backtop_show = true;\n                else\n                    this.backtop_show = false;\n                if (document.documentElement.scrollTop > document.body.offsetHeight - window.innerHeight - 30) {\n                    if (this.lock)\n                        this.getVideos();\n                }\n            });\n        }\n    },\n    created() {\n        this.getFirstVideos();\n    },\n    mounted() {\n        this.scrollListener();\n        this.$refs.load.addEventListener(\"mousedown\", () => {\n            this.$refs.load.classList.add(\"btn-hold\");\n        });\n        document.addEventListener(\"mouseup\", () => {\n            this.$refs.load.classList.remove(\"btn-hold\");\n        });\n    }\n}\n</script>\n<style lang=\"css\">\n.border-container {\n    padding: 5px;\n    border: 1px solid transparent;\n    border-radius: 6px;\n    transition: all .3s ease;\n}\n\n.border-container:hover {\n    border: 1px solid var(--ava);\n}\n\n.load-more {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    writing-mode: tb;\n    width: 38px;\n    padding: 12px 5px 12px 5px;\n    cursor: pointer;\n    user-select: none;\n    border-radius: 10px;\n    border: 1px solid var(--line_regular);\n    position: fixed;\n    right: 30px;\n    top: 40%;\n    background-color: rgba(255, 255, 255, 0.6);\n    transition: all .3s ease;\n    letter-spacing: 2px;\n}\n\n.load-more:hover {\n    background-color: rgb(225, 225, 225, 0.6);\n}\n\n.btn-hold {\n    transform: scale(0.9);\n}\n\n.main-view ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    align-items: flex-start;\n    height: auto;\n}\n\n.main-view li {\n    aspect-ratio: 16/11;\n    width: 20%;\n    padding: 5px;\n    box-sizing: border-box;\n}\n\n.main-view li img {\n    object-fit: cover;\n    aspect-ratio: 16/9;\n    width: 100%;\n    cursor: pointer;\n}\n\n.img-container {\n    border-radius: 6px;\n    overflow: hidden;\n}\n\n.main-view {\n    height: auto;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n}\n\n.main-view section {\n    padding-top: 20px;\n    width: 80%;\n}\n\n\n.main-recommend-li-title {\n    height: 54px;\n    overflow: hidden;\n    word-wrap: break-word;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    font-size: 20px;\n    text-align: left;\n    transition: color .3s ease;\n    cursor: pointer;\n    color: #000;\n}\n\n.main-recommend-li-detail {\n    font-size: 18px;\n    display: flex;\n    flex-direction: column;\n    width: 53%;\n    justify-content: flex-start;\n    align-items: flex-start;\n    color: rgb(129, 129, 129);\n    transition: color .3s ease;\n    cursor: pointer;\n    text-align: left;\n}\n\n.upName_span {\n    text-align: left;\n    width: 100%;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    text-overflow: ellipsis;\n    word-wrap: break-word;\n}\n\n.main-recommend-li-detail svg {\n    fill: rgb(129, 129, 129);\n    transition: fill .3s ease;\n}\n\n.main-recommend-li-detail-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: 5px;\n}\n\n.main-recommend-li-detail-container span {\n    padding-top: 2.5px;\n    margin-left: 5px;\n}\n\n.main-recommend-li-detail-play {\n    padding-right: 5px;\n    white-space: nowrap;\n}\n\n.main-recommend-li-detail:hover {\n    color: var(--ava);\n}\n\n.main-recommend-li-detail:hover svg {\n    fill: var(--ava);\n}\n\n.main-recommend-li-title:hover {\n    color: var(--ava);\n}\n\n.loadmore {\n    font-size: 25px;\n    padding: 5px 0px 20px 0px;\n}\n\n.aside {\n    position: fixed;\n    right: 50px;\n    bottom: 50px;\n}\n\n.backtopShow-enter-active,\n.backtopShow-leave-active {\n    transition: all .3s ease;\n}\n\n.backtopShow-enter-from,\n.backtopShow-leave-to {\n    opacity: 0.0 !important;\n}\n\n.backtopShow-enter-to,\n.backtopShow-leave-from {\n    opacity: 1.0 !important;\n}\n\n@media screen and (max-width:550px) {\n    .main-view section {\n        width: 100%;\n    }\n\n    .main-view li {\n        width: 50%;\n        padding: 10px;\n    }\n\n    .aside {\n        bottom: 65px;\n        right: 30px;\n    }\n\n    .main-recommend-li-detail {\n        font-size: 14px;\n    }\n\n    .main-recommend-li-detail span {\n        font-size: 10px;\n        margin-left: 5px;\n    }\n\n    .main-recommend-li-detail svg {\n        height: 10px;\n        width: 10px;\n    }\n\n    .main-recommend-li-title {\n        font-size: 14px;\n        height: 35px; \n    }\n\n    .load-more {\n        display: none;\n    }\n\n    .options-li {\n        margin: 0 !important;\n    }\n}\n\n@media screen and (550px<width<=800px) {\n    .main-recommend-li-detail {\n        font-size: 14px;\n    }\n\n    .main-recommend-li-detail span {\n        font-size: 10px;\n        margin-left: 5px;\n    }\n\n    .main-recommend-li-detail svg {\n        height: 10px;\n        width: 10px;\n    }\n\n    .main-recommend-li-title {\n        font-size: 14px;\n        height: 35px;\n    }\n\n    .main-view li {\n        width: 33%;\n    }\n}\n@media screen and (800px<width<=1100px) {\n    .main-recommend-li-detail {\n        font-size: 14px;\n    }\n\n    .main-recommend-li-detail span {\n        font-size: 10px;\n        margin-left: 5px;\n    }\n\n    .main-recommend-li-detail svg {\n        height: 10px;\n        width: 10px;\n    }\n\n    .main-recommend-li-title {\n        font-size: 14px;\n        height: 35px;\n    }\n\n    .main-view li {\n        width: 25%;\n    }\n}\n@media screen and (1100px<width<=1500px) {\n    .main-recommend-li-detail {\n        font-size: 16px;\n    }\n\n    .main-recommend-li-detail span {\n        font-size: 12px;\n        margin-left: 5px;\n    }\n\n    .main-recommend-li-detail svg {\n        height: 12px;\n        width: 12px;\n    }\n\n    .main-recommend-li-title {\n        font-size: 16px;\n        height: 40px;\n    }\n}\n</style>"]},"metadata":{},"sourceType":"module"}